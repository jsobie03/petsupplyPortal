/**
 * Scrolling Table for PHPMaker 12
 * @license (C)2015 e.World Technology Ltd.
 */
function ew_ScrollableTable(elContainer,width,height){var j=jQuery,$container=$("#"+elContainer),tbd=$container.find("table.ewTable")[0],ua=EW_MOBILE_DETECT;if(!(!ua.mobile()&&ua.version("MSIE")<8||ua.mobile()&&"A"!=ua.mobileGrade()||!width&&!height)&&tbd&&tbd.rows&&$container[0]&&$container.is("div.ewGridMiddlePanel")){var timer,$subContainers=$(),$tbd=$(tbd),$window=$(window),$grid=$container.addClass("ewScrollableTable").closest(".ewGrid"),$panels=$grid.find(".ewGridLowerPanel, .ewGridUpperPanel"),isMobile=function(){return ua.mobile()||$window.width()<=767},getWidth=function(){return isMobile()?"100%":width},setWidths=function(){var t=getWidth();$grid.css("width",t),$panels.innerWidth(t),$subContainers.toggle(!t).width(t);try{if($panels.length)t=$panels.innerWidth();else{var e=$("<div></div>").appendTo($grid);t=e.width(),e.remove()}$subContainers.width(t).filter(".ewScrollableTableBody").css("overflowX",t?"auto":"hidden")}finally{$subContainers.show()}};$window.resize(function(){clearTimeout(timer),timer=setTimeout(setWidths,250)}),$(function(){var yscroll=height,elContainer=$container[0];$(tbd.rows).each(function(){$(this.cells).each(function(){$(this).wrapInner("<div></div>")})});var awidth=$(tbd.rows[0].cells).map(function(){return this.firstChild.offsetWidth}).get();$container.width(width||"").height(height||"").css("overflowX",width?"auto":"hidden").css("overflowY",height?"auto":"hidden");var xscrolling=width&&elContainer.scrollWidth>elContainer.clientWidth,yscrolling=height&&elContainer.scrollHeight>elContainer.clientHeight;$container.width("").height("").css("overflowX","hidden").css("overflowY","hidden");var tr,thd,$thd;if(yscroll){var $hdContainer=$("<div></div>").width(width||"").addClass("ewScrollableTableHeader").appendTo($container),$pthd=$("<table></table>").attr({border:0,cellSpacing:0,cellPadding:0,width:"100%"});tr=$pthd[0].insertRow(-1),$(tr).addClass("ewTableHeader"),$thd=$("<table></table>").attr({border:0,cellSpacing:0,cellPadding:0}).addClass("ewTable ewTableSeparate").appendTo($(tr.insertCell(-1)).css({padding:"0px",border:"0px"})),thd=$thd[0],$hdContainer.append($pthd),$subContainers=$subContainers.add($hdContainer)}var $bdContainer=$("<div></div>").width(width||"").height(height||"").css("overflowX",width?"auto":"hidden").css("overflowY",height?"auto":"hidden").addClass("ewScrollableTableBody").scroll(function(t){$hdContainer&&$hdContainer.scrollLeft(this.scrollLeft)});if($container.append($bdContainer),$subContainers=$subContainers.add($bdContainer),$bdContainer.append(tbd),yscroll&&($(tbd.tHead).clone().appendTo(thd),$(tbd.tHead).hide()),awidth&&tbd.rows&&tbd.rows[0]&&tbd.rows[0].cells){for(var stmt="",i=0,ccnt=tbd.rows[0].cells.length;ccnt>i;i++){thd&&thd.tHead&&thd.tHead.rows&&thd.tHead.rows[0]&&(stmt+="thd.tHead.rows[0].cells["+i+"].firstChild.style.width='"+awidth[i]+"px';");for(var j=0,rcnt=tbd.rows.length;rcnt>j;j++)stmt+="tbd.rows["+j+"].cells["+i+"].firstChild.style.width='"+awidth[i]+"px';"}""!=stmt&&eval(stmt)}var bdContainer=$bdContainer[0];if(yscrolling=bdContainer.scrollHeight>bdContainer.clientHeight,xscrolling=bdContainer.scrollWidth>bdContainer.clientWidth,yscroll&&yscrolling&&tr&&$(tr.insertCell(-1)).addClass("ewScrollableTableOverhang").html($("<div></div>").width(bdContainer.offsetWidth-bdContainer.clientWidth)),ew_SetupTable(-1,tbd),yscroll&&tbd.rows&&bdContainer.clientHeight>tbd.offsetHeight){var $rows=$(tbd.rows).filter(":not(."+EW_ITEM_TEMPLATE_CLASSNAME+")"),n=$rows.filter("[data-rowindex=1]").length||$rows.filter("[data-rowindex=0]").length||1;$rows.filter(":gt("+(-1*n-1)+")").find("td."+EW_TABLE_LAST_ROW_CLASSNAME).removeClass(EW_TABLE_LAST_ROW_CLASSNAME).addClass(EW_TABLE_BORDER_BOTTOM_CLASSNAME)}})}}